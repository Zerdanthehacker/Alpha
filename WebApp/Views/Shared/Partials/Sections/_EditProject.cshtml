@model Business.Models.AddProjectForm

<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
<link rel="stylesheet" href="~/css/EditProject.css" />

<div id="editProjectModal" class="modal">
    <div class="modal-overlay" data-close="true"></div>

    <div class="modal-content form-container">
        <div class="modal-header">
            <h1 class="title">Edit Project</h1>
            <i class="fa-solid fa-xmark" data-close="true"></i>
        </div>

        <img class="img" src="~/images/ProjectImage.svg" alt="Edit Project" />

        <form id="editProjectForm">
            <div class="form-inner">

                <label asp-for="ProjectName"></label>
                <input asp-for="ProjectName" id="editProjectName" />
                <span asp-validation-for="ProjectName"></span>

                <label asp-for="ClientName"></label>
                <input asp-for="ClientName" id="editClientName" />
                <span asp-validation-for="ClientName"></span>

                <label asp-for="Description"></label>
                <div class="quill-container">
                    <div id="editEditor"></div>
                    <input type="hidden" asp-for="Description" id="edit-hidden-description" />
                </div>
                <span asp-validation-for="Description"></span>

                <div class="date-row">
                    <div class="date-group">
                        <label asp-for="StartDate"></label>
                        <input asp-for="StartDate" type="date" id="editStartDate" />
                        <span asp-validation-for="StartDate"></span>
                    </div>
                    <div class="date-group">
                        <label asp-for="EndDate"></label>
                        <input asp-for="EndDate" type="date" id="editEndDate" />
                        <span asp-validation-for="EndDate"></span>
                    </div>
                </div>

                <label asp-for="Budget"><i class="fas fa-dollar-sign"></i> Budget</label>
                <input asp-for="Budget" id="editBudget" />
                <span asp-validation-for="Budget"></span>

                <button type="submit" class="create-btn">Save Changes</button>
            </div>
        </form>
    </div>
</div>

<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
<script>
    const editQuill = new Quill('#editEditor', {
        theme: 'snow',
        placeholder: 'Type something'
    });

    document.getElementById('editProjectForm').addEventListener('submit', function (e) {
        e.preventDefault(); // hindra riktig post-back
        document.getElementById('edit-hidden-description').value = editQuill.root.innerHTML;

        // här kan du lägga in logik som uppdaterar kortet direkt eller skickar data till backend

        document.getElementById('editProjectModal').style.display = 'none';
    });

    document.addEventListener('click', function (e) {
        if (e.target.matches('[data-close]')) {
            document.getElementById('editProjectModal').style.display = 'none';
        }
    });
</script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
